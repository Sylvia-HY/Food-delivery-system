{"remainingRequest":"C:\\Users\\lenovo\\Desktop\\082601-外卖送餐\\管理后台前端\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\lenovo\\Desktop\\082601-外卖送餐\\管理后台前端\\src\\views\\login\\index.vue?vue&type=style&index=0&lang=scss&","dependencies":[{"path":"C:\\Users\\lenovo\\Desktop\\082601-外卖送餐\\管理后台前端\\src\\views\\login\\index.vue","mtime":1662028186255},{"path":"C:\\Users\\lenovo\\Desktop\\082601-外卖送餐\\管理后台前端\\node_modules\\css-loader\\dist\\cjs.js","mtime":1641885191395},{"path":"C:\\Users\\lenovo\\Desktop\\082601-外卖送餐\\管理后台前端\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1642038070263},{"path":"C:\\Users\\lenovo\\Desktop\\082601-外卖送餐\\管理后台前端\\node_modules\\postcss-loader\\src\\index.js","mtime":1641885191858},{"path":"C:\\Users\\lenovo\\Desktop\\082601-外卖送餐\\管理后台前端\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1641885203758},{"path":"C:\\Users\\lenovo\\Desktop\\082601-外卖送餐\\管理后台前端\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1641885170445},{"path":"C:\\Users\\lenovo\\Desktop\\082601-外卖送餐\\管理后台前端\\node_modules\\vue-loader\\lib\\index.js","mtime":1642038070263}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLyog5L+u5aSNaW5wdXQg6IOM5pmv5LiN5Y2P6LCDIOWSjOWFieagh+WPmOiJsiAqLwovKiBEZXRhaWwgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9QYW5KaWFDaGVuL3Z1ZS1lbGVtZW50LWFkbWluL3B1bGwvOTI3ICovCgokYmc6ICMyODM0NDM7CiRsaWdodF9ncmF5OiAjZmZmOwokY3Vyc29yOiAjZmZmOwoKQHN1cHBvcnRzICgtd2Via2l0LW1hc2s6IG5vbmUpIGFuZCAobm90IChjYXRlci1jb2xvcjogJGN1cnNvcikpIHsKICAubG9naW4tY29udGFpbmVyIC5lbC1pbnB1dCBpbnB1dCB7CiAgICBjb2xvcjogJGN1cnNvcjsKICB9Cn0KaHRtbCB7CiAgaGVpZ2h0OiAxMDAlOwp9Ci8qIHJlc2V0IGVsZW1lbnQtdWkgY3NzICovCi5yZWdpdGVyLWZvcm0gewogIC5yZWdpc3Rlci1pdGVtIHsKICAgIC5lbC1mb3JtLWl0ZW1fX2NvbnRlbnQgewogICAgICAuZWwtaW5wdXQgewogICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDsKICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjZGNkZmU2ICFpbXBvcnRhbnQ7CiAgICAgICAgaW5wdXQgewogICAgICAgICAgY29sb3I6IGJsYWNrOwogICAgICAgICAgY2FyZXQtY29sb3I6IGJsYWNrOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0KfQoKLmxvZ2luLWNvbnRhaW5lciB7CiAgLmVsLWlucHV0IHsKICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICAgIGhlaWdodDogNDdweDsKICAgIHdpZHRoOiA4NSU7CgogICAgaW5wdXQgewogICAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDsKICAgICAgYm9yZGVyOiAwcHg7CiAgICAgIC13ZWJraXQtYXBwZWFyYW5jZTogbm9uZTsKICAgICAgYm9yZGVyLXJhZGl1czogMHB4OwogICAgICBwYWRkaW5nOiAxMnB4IDVweCAxMnB4IDE1cHg7CiAgICAgIGNvbG9yOiAkbGlnaHRfZ3JheTsKICAgICAgaGVpZ2h0OiA0N3B4OwogICAgICBjYXJldC1jb2xvcjogJGN1cnNvcjsKCiAgICAgICY6LXdlYmtpdC1hdXRvZmlsbCB7CiAgICAgICAgYm94LXNoYWRvdzogMCAwIDBweCAxMDAwcHggJGJnIGluc2V0ICFpbXBvcnRhbnQ7CiAgICAgICAgLXdlYmtpdC10ZXh0LWZpbGwtY29sb3I6ICRjdXJzb3IgIWltcG9ydGFudDsKICAgICAgfQogICAgfQogIH0KCiAgLmVsLWZvcm0taXRlbTpub3QoLnJlZ2lzdGVyLWl0ZW0sIC51c2VyLXR5cGUpIHsKICAgIGJvcmRlcjogMXB4IHNvbGlkIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xKTsKICAgIGJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgMC4xKTsKICAgIGJvcmRlci1yYWRpdXM6IDVweDsKICAgIGNvbG9yOiAjNDU0NTQ1OwogIH0KfQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqTA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/login","sourcesContent":["<template>\n  <div class=\"login-container\">\n    <el-form ref=\"loginForm\" :model=\"loginForm\" class=\"login-form\" auto-complete=\"on\" label-position=\"left\" v-if=\"type=='登录'\">\n      <div class=\"title-container\">\n        <h3 class=\"title\">登录</h3>\n      </div>\n      <el-form-item prop=\"username\">\n        <span class=\"svg-container\">\n          <svg-icon icon-class=\"user\" />\n        </span>\n        <el-input ref=\"username\" v-model=\"loginForm.username\" placeholder=\"请输入账号\" name=\"username\" type=\"text\" tabindex=\"1\" auto-complete=\"on\" />\n      </el-form-item>\n\n      <el-form-item prop=\"password\">\n        <span class=\"svg-container\">\n          <svg-icon icon-class=\"password\" />\n        </span>\n        <el-input :key=\"passwordType\" ref=\"password\" v-model=\"loginForm.password\" :type=\"passwordType\" placeholder=\"请输入密码\" name=\"password\" tabindex=\"2\" auto-complete=\"on\" />\n        <span class=\"show-pwd\" @click=\"showPwd\">\n          <svg-icon :icon-class=\"passwordType === 'password' ? 'eye' : 'eye-open'\" />\n        </span>\n      </el-form-item>\n      <el-form-item>\n        <div class=\"f-r\">\n          <Sldentify :identifyCode=\"identifyCode\" @click.native=\"changeCode\" />\n          <el-input v-model=\"code\" placeholder=\"请输入验证码\" @keyup.enter.native=\"handleLogin\" />\n        </div>\n      </el-form-item>\n      <div class=\"t-r font-white font13 mb20 zs\" @click=\"type='注册'\">没有账号?注册</div>\n      <el-button :loading=\"loading\" type=\"primary\" style=\"width: 100%; margin-bottom: 30px\" @click.native.prevent=\"handleLogin\">登录</el-button>\n    </el-form>\n\n    <div v-if=\"type=='注册'\" class=\"f-r f-j-c pt30\">\n      <el-form ref=\"addForm\" class=\"addForm\" style=\"width:500px\" :model=\"addForm\" :rules=\"rules\" label-width=\"120px\" label-position=\"right\" size=\"small\">\n        <el-form-item label=\"\" class=\"user-type f-r f-j-c\">\n          <el-upload class=\"avatar-uploader\" :data=\"{ thumb: false }\" :action=\"url\" :show-file-list=\"false\" :on-success=\"imgSuccess\">\n            <img v-if=\"addForm.img\" :src=\"addForm.img\" class=\"avatar\" />\n            <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\n          </el-upload>\n        </el-form-item>\n\n        <el-form-item label=\"\" class=\"register-item\">\n          <el-select v-model=\"addForm.type\" placeholder=\"请选择店铺分类\" class=\"w100\">\n            <el-option value=\"汉堡\"></el-option>\n            <el-option value=\"炒菜\"></el-option>\n            <el-option value=\"面食\"></el-option>\n            <el-option value=\"饮品\"></el-option>\n            <el-option value=\"小吃\"></el-option>\n          </el-select>\n        </el-form-item>\n\n        <el-form-item class=\"register-item\" label=\"\" prop=\"user\">\n          <el-input v-model=\"addForm.user\" placeholder=\"请输入账号\" type=\"text\" />\n        </el-form-item>\n\n        <el-form-item class=\"register-item\" label=\"\" prop=\"pwd\">\n          <el-input v-model=\"addForm.pwd\" placeholder=\"请输入密码\" type=\"password\" />\n        </el-form-item>\n\n        <el-form-item class=\"register-item\" label=\"\" prop=\"name\">\n          <el-input v-model=\"addForm.name\" placeholder=\"请输入姓名\" type=\"text\" />\n        </el-form-item>\n\n        <el-form-item class=\"register-item\" label=\"\" prop=\"tel\">\n          <el-input v-model=\"addForm.tel\" placeholder=\"请输入手机号\" type=\"text\" />\n        </el-form-item>\n\n        <el-form-item class=\"register-item\" label=\"\">\n          <el-input v-model=\"addForm.addr\" placeholder=\"请输入店铺地址\" type=\"textarea\" rows=\"5\" />\n        </el-form-item>\n\n        <div class=\"t-r font-white font13 mb20 zs\" @click=\"type='登录'\">已有账号?登录</div>\n\n        <el-form-item class=\"register-item mt30 t-r\" label=\"\">\n          <el-button type=\"primary\" @click=\"save\" class=\"w100\" size=\"medium\">注册</el-button>\n        </el-form-item>\n      </el-form>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { validUsername } from \"@/utils/validate\";\nimport * as api from \"@/api/api\";\nimport Sldentify from \"@/components/Sldentify\";\n\nexport default {\n  name: \"Login\",\n  components: { Sldentify },\n  data() {\n    const validateUsername = (rule, value, callback) => {\n      if (!validUsername(value)) {\n        callback(new Error(\"Please enter the correct user name\"));\n      } else {\n        callback();\n      }\n    };\n    const validatePassword = (rule, value, callback) => {\n      if (value.length < 3) {\n        callback(new Error(\"The password can not be less than 6 digits\"));\n      } else {\n        callback();\n      }\n    };\n    return {\n      identifyCode: \"\",\n      url: process.env.VUE_APP_BASE_FILE,\n      code: \"\",\n      loginForm: {\n        username: \"\",\n        password: \"\",\n      },\n      addForm: {\n        img: \"\",\n        addr: \"\",\n        status: \"禁用\",\n        type: \"\",\n        name: \"\",\n        tel: \"\",\n        monthnum: 0,\n      },\n      rules: {\n        user: [\n          { required: true, message: \"不能为空\", trigger: \"blur\" },\n          {\n            validator: (rule, value, callback) => {\n              let reg = /^[A-Za-z0-9]+$/;\n              if (value.length < 5 || value.length > 10) {\n                callback(new Error(\"长度为5-10位\"));\n              } else if (!reg.test(value)) {\n                callback(new Error(\"类型为数字和字母!\"));\n              } else {\n                callback();\n              }\n            },\n            trigger: \"blur\",\n          },\n        ],\n        pwd: [\n          { required: true, message: \"不能为空\", trigger: \"blur\" },\n          {\n            validator: (rule, value, callback) => {\n              let reg = /^[A-Za-z0-9]+$/;\n              if (value.length < 5 || value.length > 10) {\n                callback(new Error(\"长度为5-10位\"));\n              } else if (!reg.test(value)) {\n                callback(new Error(\"类型为数字和字母!\"));\n              } else {\n                callback();\n              }\n            },\n            trigger: \"blur\",\n          },\n        ],\n        name: [\n          { required: true, message: \"不能为空\", trigger: \"blur\" },\n          {\n            validator: (rule, value, callback) => {\n              let reg = /^(?:[\\u4e00-\\u9fa5·]{2,16})$/;\n              if (!reg.test(value)) {\n                callback(new Error(\"名称不合法,为2-16位中文!\"));\n              } else {\n                callback();\n              }\n            },\n            trigger: \"blur\",\n          },\n        ],\n        tel: [\n          { required: true, message: \"不能为空\", trigger: \"blur\" },\n          {\n            validator: (rule, value, callback) => {\n              let reg = /^(?:(?:\\+|00)86)?1\\d{10}$/;\n              if (!reg.test(value)) {\n                callback(new Error(\"手机号格式不正确\"));\n              } else {\n                callback();\n              }\n            },\n            trigger: \"blur\",\n          },\n        ],\n      },\n      type: \"登录\",\n      show: false,\n      loading: false,\n      passwordType: \"password\",\n      redirect: undefined,\n    };\n  },\n  watch: {\n    $route: {\n      handler: function (route) {\n        this.redirect = route.query && route.query.redirect;\n      },\n      immediate: true,\n    },\n\n    type() {\n      this.resetData(\"loginForm\", this);\n      this.resetData(\"addForm\", this);\n    },\n  },\n  created() {\n    this.changeCode();\n  },\n  methods: {\n    //大图上传\n    imgSuccess(file) {\n      this.addForm.img = file.data;\n    },\n\n    // 注册\n    async save() {\n      this.$refs.addForm.validate(async (valid) => {\n        if (valid) {\n          // 查询账号是否重复\n          let data = await api.storeslist({\n            user: this.addForm.user,\n            limit: 1,\n            offset: 1,\n          });\n\n          if (data.data.total > 0) {\n            this.$message.error(\"账号已存在!\");\n            return;\n          }\n\n          await api.storessave(this.addForm);\n          this.$message.success(\"注册成功,请等待管理员审核!\");\n          this.type = \"登录\";\n        } else {\n          return false;\n        }\n      });\n    },\n\n    showPwd() {\n      if (this.passwordType === \"password\") {\n        this.passwordType = \"\";\n      } else {\n        this.passwordType = \"password\";\n      }\n      this.$nextTick(() => {\n        this.$refs.password.focus();\n      });\n    },\n\n    // 更改验证码\n    changeCode() {\n      this.identifyCode = this.$tool.random(1535, 9864).toString();\n      this.code = \"\";\n    },\n\n    // 登录\n    async handleLogin() {\n      if (!this.loginForm.username || !this.loginForm.password) {\n        this.$message.error(\"请输入账号密码!\");\n        return;\n      }\n\n      if (this.identifyCode != this.code) {\n        this.$message.error(\"验证码错误!\");\n        this.changeCode();\n        return;\n      }\n\n      if (\n        this.loginForm.username == \"admin\" &&\n        this.loginForm.password == \"admin\"\n      ) {\n        sessionStorage.setItem(\"islogin\", true);\n        sessionStorage.setItem(\"isAdmin\", \"admin\");\n        sessionStorage.setItem(\"type\", \"超级管理员\");\n        sessionStorage.setItem(\"name\", \"超级管理员\");\n        this.$router.push({ path: \"/admin\" });\n        return;\n      }\n\n      await api\n        .storeslist({\n          user: this.loginForm.username,\n          pwd: this.loginForm.password,\n          status: \"启用\",\n          limit: 1,\n          offset: 1,\n        })\n        .then(async (res) => {\n          if (res.data.list.length > 0) {\n            let info = res.data.list[0];\n            Object.keys(info).map((i, k) => {\n              sessionStorage.setItem(i, info[i]);\n            });\n            sessionStorage.setItem(\"islogin\", true);\n            sessionStorage.setItem(\"isAdmin\", \"admin\");\n            sessionStorage.setItem(\"type\", \"商家\");\n            this.$router.push({ path: \"/admin\" });\n            return;\n          } else {\n            this.$message.error(\"账号密码错误或没有启用,请联系管理员!\");\n            return;\n          }\n        });\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\">\n/* 修复input 背景不协调 和光标变色 */\n/* Detail see https://github.com/PanJiaChen/vue-element-admin/pull/927 */\n\n$bg: #283443;\n$light_gray: #fff;\n$cursor: #fff;\n\n@supports (-webkit-mask: none) and (not (cater-color: $cursor)) {\n  .login-container .el-input input {\n    color: $cursor;\n  }\n}\nhtml {\n  height: 100%;\n}\n/* reset element-ui css */\n.regiter-form {\n  .register-item {\n    .el-form-item__content {\n      .el-input {\n        border-radius: 4px;\n        border: 1px solid #dcdfe6 !important;\n        input {\n          color: black;\n          caret-color: black;\n        }\n      }\n    }\n  }\n}\n\n.login-container {\n  .el-input {\n    display: inline-block;\n    height: 47px;\n    width: 85%;\n\n    input {\n      background: transparent;\n      border: 0px;\n      -webkit-appearance: none;\n      border-radius: 0px;\n      padding: 12px 5px 12px 15px;\n      color: $light_gray;\n      height: 47px;\n      caret-color: $cursor;\n\n      &:-webkit-autofill {\n        box-shadow: 0 0 0px 1000px $bg inset !important;\n        -webkit-text-fill-color: $cursor !important;\n      }\n    }\n  }\n\n  .el-form-item:not(.register-item, .user-type) {\n    border: 1px solid rgba(255, 255, 255, 0.1);\n    background: rgba(0, 0, 0, 0.1);\n    border-radius: 5px;\n    color: #454545;\n  }\n}\n</style>\n\n<style lang=\"scss\" scoped>\n$bg: #2d3a4b;\n$dark_gray: #889aa4;\n$light_gray: #eee;\n\n.user-type {\n  border: none;\n  background: rgba(0, 0, 0, 0);\n}\n.emailcode {\n  display: flex;\n  align-items: center;\n  ::v-deep .el-input-group__append {\n    height: 47px;\n    width: 200px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    padding: 0 !important;\n  }\n}\n.login-container {\n  min-height: 100%;\n  width: 100%;\n  background-color: $bg;\n  overflow: hidden;\n\n  .login-form {\n    position: relative;\n    width: 520px;\n    max-width: 100%;\n    padding: 160px 35px 0;\n    margin: 0 auto;\n    overflow: hidden;\n  }\n\n  .tips {\n    font-size: 14px;\n    color: #fff;\n    margin-bottom: 10px;\n\n    span {\n      &:first-of-type {\n        margin-right: 16px;\n      }\n    }\n  }\n\n  .svg-container {\n    padding: 6px 5px 6px 15px;\n    color: $dark_gray;\n    vertical-align: middle;\n    width: 30px;\n    display: inline-block;\n  }\n\n  .title-container {\n    position: relative;\n\n    .title {\n      font-size: 26px;\n      color: $light_gray;\n      margin: 0px auto 40px auto;\n      text-align: center;\n      font-weight: bold;\n    }\n  }\n\n  .show-pwd {\n    position: absolute;\n    right: 10px;\n    top: 7px;\n    font-size: 16px;\n    color: $dark_gray;\n    cursor: pointer;\n    user-select: none;\n  }\n}\n>>> .avatar-uploader .el-upload {\n  border: 1px dashed #d9d9d9;\n  border-radius: 6px;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n}\n.avatar-uploader .el-upload:hover {\n  border-color: #409eff;\n}\n.avatar-uploader-icon {\n  border: 1px #c7c7c7 dashed;\n  border-radius: 10px;\n  font-size: 28px;\n  color: #8c939d;\n  width: 178px;\n  height: 178px;\n  line-height: 178px;\n  text-align: center;\n}\n.avatar {\n  width: 178px;\n  height: 178px;\n  display: block;\n}\n.addForm {\n  ::v-deep .el-form-item__content {\n    border: 1px solid rgba(255, 255, 255, 0.1);\n    background: rgba(0, 0, 0, 0.1);\n    border-radius: 5px;\n    .el-input {\n      width: 100%;\n    }\n  }\n}\n</style>\n"]}]}