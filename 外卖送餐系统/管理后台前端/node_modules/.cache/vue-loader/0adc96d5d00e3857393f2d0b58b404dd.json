{"remainingRequest":"E:\\项目\\2022\\082601-外卖送餐\\管理后台前端\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\项目\\2022\\082601-外卖送餐\\管理后台前端\\src\\views\\admin\\index.vue?vue&type=style&index=0&id=2ba5fe30&lang=scss&scoped=true&","dependencies":[{"path":"E:\\项目\\2022\\082601-外卖送餐\\管理后台前端\\src\\views\\admin\\index.vue","mtime":1661931199884},{"path":"E:\\项目\\2022\\082601-外卖送餐\\管理后台前端\\node_modules\\css-loader\\dist\\cjs.js","mtime":1641885191395},{"path":"E:\\项目\\2022\\082601-外卖送餐\\管理后台前端\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1642038070263},{"path":"E:\\项目\\2022\\082601-外卖送餐\\管理后台前端\\node_modules\\postcss-loader\\src\\index.js","mtime":1641885191858},{"path":"E:\\项目\\2022\\082601-外卖送餐\\管理后台前端\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1641885203758},{"path":"E:\\项目\\2022\\082601-外卖送餐\\管理后台前端\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1641885170445},{"path":"E:\\项目\\2022\\082601-外卖送餐\\管理后台前端\\node_modules\\vue-loader\\lib\\index.js","mtime":1642038070263}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouZGFzaGJvYXJkIHsKICAmLWNvbnRhaW5lciB7CiAgICBtYXJnaW46IDMwcHg7CiAgfQogICYtdGV4dCB7CiAgICBmb250LXNpemU6IDMwcHg7CiAgICBsaW5lLWhlaWdodDogNDZweDsKICB9Cn0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+OA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/admin","sourcesContent":["<template>\n  <div class=\"p20 f-r f-w-t\" style=\"margin: 0 -10px\">\n    <div style=\"width: 50%\" class=\"p10\">\n      <el-card class=\"box-card\">\n        <div class=\"mb30\">用户数量({{people}})</div>\n        <div id=\"container\" style=\"height: 300px\"></div>\n      </el-card>\n    </div>\n\n    <div style=\"width: 50%\" class=\"p10\">\n      <el-card class=\"box-card\">\n        <div class=\"mb30\">菜品销量</div>\n        <div id=\"menu\" style=\"height: 300px\"></div>\n      </el-card>\n    </div>\n\n    <div style=\"width: 100%\" class=\"p10\">\n      <el-card class=\"box-card\">\n        <div class=\"mb30\">本月销量</div>\n        <div id=\"month\" style=\"height: 300px\"></div>\n      </el-card>\n    </div>\n  </div>\n</template>\n\n<script>\nimport * as api from \"@/api/api\";\nimport { Line, Pie } from \"@antv/g2plot\";\n\nexport default {\n  components: {},\n  data() {\n    return {\n      url: process.env.VUE_APP_BASE_FILE,\n      list: [],\n      people: 0,\n    };\n  },\n  created() {},\n  mounted() {\n    this.getUser();\n    this.getMenu();\n    this.getMonth();\n  },\n  methods: {\n    //用户数量\n    getUser() {\n      let data = {\n        \"01\": {\n          month: \"01\",\n          num: 0,\n        },\n        \"02\": {\n          month: \"02\",\n          num: 0,\n        },\n        \"03\": {\n          month: \"03\",\n          num: 0,\n        },\n        \"04\": {\n          month: \"04\",\n          num: 0,\n        },\n        \"05\": {\n          month: \"05\",\n          num: 0,\n        },\n        \"06\": {\n          month: \"06\",\n          num: 0,\n        },\n        \"07\": {\n          month: \"07\",\n          num: 0,\n        },\n        \"08\": {\n          month: \"08\",\n          num: 0,\n        },\n        \"09\": {\n          month: \"09\",\n          num: 0,\n        },\n        10: {\n          month: \"10\",\n          num: 0,\n        },\n        11: {\n          month: \"11\",\n          num: 0,\n        },\n        12: {\n          month: \"12\",\n          num: 0,\n        },\n      };\n      api\n        .userlist({\n          limit: 99999,\n          offset: 1,\n        })\n        .then((res) => {\n          if (res.data.total > 0) {\n            this.people = res.data.total;\n            res.data.list.forEach((i) => {\n              data[i.time.substr(5, 2)][\"num\"] += 1;\n            });\n          }\n          let newdata = Object.values(data).map((i) => i);\n          newdata.sort((a, b) => {\n            return Number(a.month) - Number(b.month);\n          });\n\n          const line = new Line(\"container\", {\n            data: newdata,\n            padding: \"auto\",\n            xField: \"month\",\n            yField: \"num\",\n            meta: {\n              num: {\n                alias: \"数量\",\n                tickInterval: 10,\n                tickCount: 5,\n              },\n              month: {\n                formatter: (month) => {\n                  return month + \"月\";\n                },\n              },\n            },\n          });\n\n          line.render();\n        });\n    },\n\n    // 菜品销量\n    getMenu() {\n      api\n        .menuslist({\n          limit: 9999,\n          offset: 1,\n          sid: sessionStorage.getItem(\"id\") ? sessionStorage.getItem(\"id\") : \"\",\n        })\n        .then((res) => {\n          const piePlot = new Pie(\"menu\", {\n            appendPadding: 10,\n            data: res.data.list,\n            angleField: \"monthnum\",\n            colorField: \"name\",\n            radius: 0.9,\n            label: {\n              type: \"inner\",\n              offset: \"-30%\",\n              content: ({ percent }) => `${(percent * 100).toFixed(0)}%`,\n              style: {\n                fontSize: 14,\n                textAlign: \"center\",\n              },\n            },\n            interactions: [{ type: \"element-active\" }],\n          });\n\n          piePlot.render();\n        });\n    },\n\n    // 本月销量\n    getMonth() {\n      let newTime = this.$moment().format(\"YYYY-MM\");\n      let list = this.getDaysArray(\n        newTime.split(\"-\")[0],\n        newTime.split(\"-\")[1]\n      );\n      api\n        .queryMonthSales({\n          limit: 9999,\n          offset: 1,\n          sid: sessionStorage.getItem(\"id\") ? sessionStorage.getItem(\"id\") : \"\",\n        })\n        .then((res) => {\n          if (res.data.total > 0) {\n            res.data.list.forEach((i) => {\n              list[i.time.substr(5, 5)][\"num\"] = Number(\n                (i.num * i.price + list[i.time.substr(5, 5)][\"num\"]).toFixed(2)\n              );\n            });\n          }\n          let newdata = Object.values(list).map((i) => i);\n          newdata.sort((a, b) => {\n            return Number(a.day.substr(3, 2)) - Number(b.day.substr(3, 2));\n          });\n\n          const line = new Line(\"month\", {\n            data: newdata,\n            padding: \"auto\",\n            xField: \"day\",\n            color: \"#62DAAB\",\n            yField: \"num\",\n            meta: {\n              num: {\n                alias: \"销量(元)\",\n                // tickInterval: 1,\n              },\n              day: {\n                formatter: (day) => {\n                  return day + \"日\";\n                },\n              },\n            },\n          });\n\n          line.render();\n        });\n    },\n\n    getDaysArray(year, month) {\n      var monthIndex = month - 1;\n      var date = new Date(year, monthIndex, 1);\n      var result = {};\n      while (date.getMonth() == monthIndex) {\n        let day =\n          date.getDate() < 10 ? 0 + \"\" + date.getDate() : date.getDate();\n        let newmonth = month;\n        result[newmonth + \"-\" + day] = {\n          day: day.toString(),\n          num: 0,\n        };\n        date.setDate(date.getDate() + 1);\n      }\n      return result;\n    },\n  },\n  computed: {},\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.dashboard {\n  &-container {\n    margin: 30px;\n  }\n  &-text {\n    font-size: 30px;\n    line-height: 46px;\n  }\n}\n</style>\n"]}]}