{"remainingRequest":"E:\\项目\\2022\\082601-外卖送餐\\管理后台前端\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\项目\\2022\\082601-外卖送餐\\管理后台前端\\src\\views\\menus\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\项目\\2022\\082601-外卖送餐\\管理后台前端\\src\\views\\menus\\index.vue","mtime":1662017880866},{"path":"E:\\项目\\2022\\082601-外卖送餐\\管理后台前端\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1641885170445},{"path":"E:\\项目\\2022\\082601-外卖送餐\\管理后台前端\\node_modules\\babel-loader\\lib\\index.js","mtime":1641885170443},{"path":"E:\\项目\\2022\\082601-外卖送餐\\管理后台前端\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1641885170445},{"path":"E:\\项目\\2022\\082601-外卖送餐\\管理后台前端\\node_modules\\vue-loader\\lib\\index.js","mtime":1642038070263}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBNaWRkbGUgZnJvbSAiQC9jb21wb25lbnRzL01pZGRsZS9pbmRleC52dWUiOwppbXBvcnQgRGlhbG9nIGZyb20gIkAvY29tcG9uZW50cy9EaWFsb2cvaW5kZXgudnVlIjsKaW1wb3J0IFBhZ2luYXRpb24gZnJvbSAiQC9jb21wb25lbnRzL1BhZ2luYXRpb24vaW5kZXgudnVlIjsKaW1wb3J0IEVuZHVpdCBmcm9tICJAL2NvbXBvbmVudHMvV2FuZ0VuZHVpdC9pbmRleC52dWUiOwppbXBvcnQgKiBhcyBhcGkgZnJvbSAiQC9hcGkvYXBpIjsKaW1wb3J0IG1kNSBmcm9tICJqcy1tZDUiOwoKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsgTWlkZGxlLCBEaWFsb2csIFBhZ2luYXRpb24sIEVuZHVpdCB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB1cmw6IHByb2Nlc3MuZW52LlZVRV9BUFBfQkFTRV9GSUxFLAogICAgICBvZmZzZXQ6IDEsIC8v5b2T5YmN6aG1CiAgICAgIGxpbWl0OiAxMCwgLy/mr4/pobXlpKflsI8KICAgICAgdG90YWw6IDAsIC8v5oC76K6w5b2V5pWwCiAgICAgIGhpZGRlbjogZmFsc2UsIC8v5YiG6aG15piv5ZCm6ZqQ6JePCiAgICAgIHNlYXJjaEZvcm06IHsKICAgICAgICBuYW1lOiAiIiwKICAgICAgfSwKICAgICAgYWRkRm9ybTogewogICAgICAgIG5hbWU6ICIiLAogICAgICAgIHByaWNlOiAiIiwKICAgICAgICBjb250ZW50OiAiIiwKICAgICAgICBpbWc6ICIiLAogICAgICAgIHN0YXR1czogIuWQr+eUqCIsCiAgICAgICAgdHlwZTogIiIsCiAgICAgICAgc2lkOiAiIiwKICAgICAgfSwKICAgICAgbGlzdDogW10sCiAgICAgIHR5cGVMaXN0OiBbXSwKICAgICAgc3RvcmVzTGlzdDogW10sCiAgICAgIHNob3dEaWFsb2c6IGZhbHNlLAogICAgfTsKICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldERhdGEoKTsKICAgIHRoaXMuZ2V0U3RvcmVzKCk7CiAgfSwKICBtb3VudGVkKCkge30sCiAgbWV0aG9kczogewogICAgLy/lpKflm77kuIrkvKAKICAgIGltZ1N1Y2Nlc3MoZmlsZSkgewogICAgICB0aGlzLmFkZEZvcm0uaW1nID0gZmlsZS5kYXRhOwogICAgfSwKCiAgICAvL+iOt+WPluW6l+mTuuWIl+ihqAogICAgZ2V0U3RvcmVzKCkgewogICAgICBhcGkKICAgICAgICAuc3RvcmVzbGlzdCh7CiAgICAgICAgICBvZmZzZXQ6IDEsCiAgICAgICAgICBsaW1pdDogOTk5OSwKICAgICAgICB9KQogICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgIGlmIChyZXMuY29kZSA9PSAyMDApIHsKICAgICAgICAgICAgdGhpcy5zdG9yZXNMaXN0ID0gcmVzLmRhdGEubGlzdDsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH0sCgogICAgLy/ojrflj5bliJfooagKICAgIGdldERhdGEoKSB7CiAgICAgIGFwaQogICAgICAgIC5tZW51c2xpc3QoewogICAgICAgICAgbmFtZTogdGhpcy5zZWFyY2hGb3JtLm5hbWUsCiAgICAgICAgICBvZmZzZXQ6IHRoaXMub2Zmc2V0LAogICAgICAgICAgbGltaXQ6IHRoaXMubGltaXQsCiAgICAgICAgICBzaWQ6IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oImlkIiksCiAgICAgICAgfSkKICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICBpZiAocmVzLmNvZGUgPT0gMjAwKSB7CiAgICAgICAgICAgIHRoaXMubGlzdCA9IHJlcy5kYXRhLmxpc3Q7CiAgICAgICAgICAgIHRoaXMudG90YWwgPSByZXMuZGF0YS50b3RhbDsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH0sCgogICAgLy/ojrflj5bliIbnsbsKICAgIGdldFR5cGUoKSB7CiAgICAgIGFwaQogICAgICAgIC50eXBlbGlzdCh7CiAgICAgICAgICBvZmZzZXQ6IDEsCiAgICAgICAgICBsaW1pdDogOTk5LAogICAgICAgICAgc2lkOiB0aGlzLmFkZEZvcm0uc2lkLAogICAgICAgIH0pCiAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgaWYgKHJlcy5jb2RlID09IDIwMCkgewogICAgICAgICAgICB0aGlzLnR5cGVMaXN0ID0gcmVzLmRhdGEubGlzdDsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH0sCgogICAgLy/mqKHmgIHmoYYt5YWz6ZetCiAgICBjbG9zZSgpIHsKICAgICAgdGhpcy5zaG93RGlhbG9nID0gZmFsc2U7CiAgICAgIGxldCB0aW1lID0gc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgdGhpcy5yZXNldERhdGEoImFkZEZvcm0iLCB0aGlzKTsgLy/ph43nva7mlbDmja4KICAgICAgfSwgMzAwKTsKICAgIH0sCgogICAgLy/liKDpmaQKICAgIGFzeW5jIGRlbChpdGVtKSB7CiAgICAgIGF3YWl0IGFwaQogICAgICAgIC5tZW51c2RlbCh7CiAgICAgICAgICBpZDogaXRlbS5pZCwKICAgICAgICB9KQogICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgIGlmIChyZXMuY29kZSA9PSAyMDApIHsKICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCLmk43kvZzmiJDlip8hIik7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHJlcy5tZXNzYWdlKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKCiAgICAgIGF3YWl0IHRoaXMuZ2V0RGF0YSgpOwogICAgfSwKCiAgICAvLyDmlrDlop4v57yW6L6RLeaPkOS6pAogICAgYXN5bmMgY29uZmlybSgpIHsKICAgICAgdGhpcy5hZGRGb3JtLnNpZCA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oImlkIik7CiAgICAgIHRyeSB7CiAgICAgICAgT2JqZWN0LmtleXModGhpcy5hZGRGb3JtKS5tYXAoKGspID0+IHsKICAgICAgICAgIGlmICghdGhpcy5hZGRGb3JtW2tdKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihrKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmxvZyhlcnJvci5tZXNzYWdlKTsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLor7floavlhpnmiYDmnInkv6Hmga8iKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIC8v57yW6L6RCiAgICAgIGF3YWl0IGFwaS5tZW51c3NhdmUodGhpcy5hZGRGb3JtKS50aGVuKChyZXMpID0+IHsKICAgICAgICBpZiAocmVzLmNvZGUgPT0gMjAwKSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIuaTjeS9nOaIkOWKnyEiKTsKICAgICAgICAgIHRoaXMuc2hvd0RpYWxvZyA9IGZhbHNlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHJlcy5tZXNzYWdlKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICBhd2FpdCB0aGlzLmdldERhdGEoKTsKICAgIH0sCgogICAgLy/nvJbovpEKICAgIGVkaXQoaXRlbSkgewogICAgICB0aGlzLmFkZEZvcm0gPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGl0ZW0pKTsgLy/lr7nosaHmi7fotJ3pmLLmraLph43nva7lr7nosaHml7bmsaHmn5MKICAgICAgdGhpcy5zaG93RGlhbG9nID0gdHJ1ZTsKICAgIH0sCiAgfSwKICBjb21wdXRlZDoge30sCn07Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoFA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/menus","sourcesContent":["<template>\n  <div class=\"dashboard-container\">\n    <el-form ref=\"searchForm\" :model=\"searchForm\" inline size=\"medium\" class=\"searchForm\" label-width=\"80px\">\n      <el-form-item label=\"菜品名称:\">\n        <el-input v-model=\"searchForm.name\" placeholder=\"\" style=\"width: 250px\"></el-input>\n      </el-form-item>\n      <el-form-item>\n        <el-button type=\"primary\" @click=\"searchForm.name = '';getData();\">重置</el-button>\n        <el-button type=\"primary\" @click=\"getData()\" icon=\"el-icon-search\">查询</el-button>\n        <el-button @click=\"showDialog = true\" icon=\"el-icon-plus\" plain>新增</el-button>\n      </el-form-item>\n    </el-form>\n\n    <el-card slot class=\"content-card\" shadow=\"never\">\n      <el-table :data=\"list\" border stripe style=\"width: 100%; min-height: 60vh\">\n        <el-table-column label=\"序号\" header-align=\"center\" align=\"center\" type=\"index\" width=\"70\"> </el-table-column>\n        <el-table-column prop=\"img\" label=\"头像\" header-align=\"center\" align=\"center\">\n          <template slot-scope=\"scope\">\n            <img :src=\"scope.row.img\" style=\"width: 80px; height: 80px; border-radius: 50%\" alt=\"\" />\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"name\" label=\"菜品名称\" header-align=\"center\" align=\"center\" />\n        <el-table-column prop=\"type\" label=\"菜品分类\" header-align=\"center\" align=\"center\" />\n        <el-table-column prop=\"price\" label=\"价格\" header-align=\"center\" align=\"center\" />\n        <el-table-column prop=\"monthnum\" label=\"月售\" header-align=\"center\" align=\"center\" />\n        <el-table-column prop=\"sname\" label=\"关联店铺\" header-align=\"center\" align=\"center\" />\n        <el-table-column prop=\"status\" label=\"状态\" header-align=\"center\" align=\"center\" />\n        <el-table-column prop=\"time\" label=\"时间\" header-align=\"center\" align=\"center\" />\n        <el-table-column prop=\"address\" label=\"操作\" header-align=\"center\" align=\"center\" width=\"190px\">\n          <template slot-scope=\"scope\">\n            <div class=\"f-r f-a-c f-j-c\">\n              <a style=\"color: rgb(31, 144, 254)\" @click=\"edit(scope.row)\">编辑</a>\n              <a style=\"margin-left: 20px; color: rgb(31, 144, 254)\" @click=\"del(scope.row)\">删除</a>\n            </div>\n          </template>\n        </el-table-column>\n      </el-table>\n      <!-- 分页 -->\n      <Pagination :limit.sync=\"limit\" :total=\"total\" :offset.sync=\"offset\" :hidden=\"hidden\" @changePage=\"getData\" />\n    </el-card>\n\n    <!-- 增加编辑 -->\n    <Dialog :showDialog.sync=\"showDialog\" title=\"\" @cancal=\"close\" @confirm=\"confirm\">\n      <div slot>\n        <el-form ref=\"addForm\" :model=\"addForm\" label-width=\"120px\" class=\"addForm\" label-position=\"right\" size=\"small\">\n          <el-form-item label=\"菜品图片:\">\n            <el-upload class=\"avatar-uploader\" :data=\"{ thumb: false }\" :action=\"url\" :show-file-list=\"false\" :on-success=\"imgSuccess\">\n              <img v-if=\"addForm.img\" :src=\"addForm.img\" class=\"avatar\" />\n              <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\n            </el-upload>\n          </el-form-item>\n          <el-form-item label=\"菜品名称:\">\n            <el-input v-model=\"addForm.name\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"关联店铺:\" filterable>\n            <el-select v-model=\"addForm.sid\" placeholder=\"请选择关联店铺\" class=\"w100\" @change=\"getType\">\n              <el-option v-for=\"item in storesList\" :key=\"item.id\" :label=\"item.name\" :value=\"item.id.toString()\"></el-option>\n            </el-select>\n          </el-form-item>\n          <el-form-item label=\"菜品分类:\">\n            <el-select v-model=\"addForm.type\" placeholder=\"请选择分类\" class=\"w100\" filterable :disabled=\"!addForm.sid\">\n              <el-option v-for=\"item in typeList\" :key=\"item.id\" :label=\"item.name\" :value=\"item.name\"></el-option>\n            </el-select>\n          </el-form-item>\n          <el-form-item label=\"价格:\">\n            <el-input v-model=\"addForm.price\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"月售:\">\n            <el-input v-model=\"addForm.monthnum\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"简介:\">\n            <el-input v-model=\"addForm.content\" type=\"textarea\" rows=\"5\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"状态:\">\n            <el-radio v-model=\"addForm.status\" label=\"启用\" />\n            <el-radio v-model=\"addForm.status\" label=\"禁用\" />\n          </el-form-item>\n        </el-form>\n      </div>\n    </Dialog>\n  </div>\n</template>\n\n<script>\nimport Middle from \"@/components/Middle/index.vue\";\nimport Dialog from \"@/components/Dialog/index.vue\";\nimport Pagination from \"@/components/Pagination/index.vue\";\nimport Enduit from \"@/components/WangEnduit/index.vue\";\nimport * as api from \"@/api/api\";\nimport md5 from \"js-md5\";\n\nexport default {\n  components: { Middle, Dialog, Pagination, Enduit },\n  data() {\n    return {\n      url: process.env.VUE_APP_BASE_FILE,\n      offset: 1, //当前页\n      limit: 10, //每页大小\n      total: 0, //总记录数\n      hidden: false, //分页是否隐藏\n      searchForm: {\n        name: \"\",\n      },\n      addForm: {\n        name: \"\",\n        price: \"\",\n        content: \"\",\n        img: \"\",\n        status: \"启用\",\n        type: \"\",\n        sid: \"\",\n      },\n      list: [],\n      typeList: [],\n      storesList: [],\n      showDialog: false,\n    };\n  },\n  created() {\n    this.getData();\n    this.getStores();\n  },\n  mounted() {},\n  methods: {\n    //大图上传\n    imgSuccess(file) {\n      this.addForm.img = file.data;\n    },\n\n    //获取店铺列表\n    getStores() {\n      api\n        .storeslist({\n          offset: 1,\n          limit: 9999,\n        })\n        .then((res) => {\n          if (res.code == 200) {\n            this.storesList = res.data.list;\n          }\n        });\n    },\n\n    //获取列表\n    getData() {\n      api\n        .menuslist({\n          name: this.searchForm.name,\n          offset: this.offset,\n          limit: this.limit,\n          sid: sessionStorage.getItem(\"id\"),\n        })\n        .then((res) => {\n          if (res.code == 200) {\n            this.list = res.data.list;\n            this.total = res.data.total;\n          }\n        });\n    },\n\n    //获取分类\n    getType() {\n      api\n        .typelist({\n          offset: 1,\n          limit: 999,\n          sid: this.addForm.sid,\n        })\n        .then((res) => {\n          if (res.code == 200) {\n            this.typeList = res.data.list;\n          }\n        });\n    },\n\n    //模态框-关闭\n    close() {\n      this.showDialog = false;\n      let time = setTimeout(() => {\n        this.resetData(\"addForm\", this); //重置数据\n      }, 300);\n    },\n\n    //删除\n    async del(item) {\n      await api\n        .menusdel({\n          id: item.id,\n        })\n        .then((res) => {\n          if (res.code == 200) {\n            this.$message.success(\"操作成功!\");\n          } else {\n            this.$message.error(res.message);\n          }\n        });\n\n      await this.getData();\n    },\n\n    // 新增/编辑-提交\n    async confirm() {\n      this.addForm.sid = sessionStorage.getItem(\"id\");\n      try {\n        Object.keys(this.addForm).map((k) => {\n          if (!this.addForm[k]) {\n            throw new Error(k);\n          }\n        });\n      } catch (error) {\n        console.log(error.message);\n        this.$message.error(\"请填写所有信息\");\n        return;\n      }\n\n      //编辑\n      await api.menussave(this.addForm).then((res) => {\n        if (res.code == 200) {\n          this.$message.success(\"操作成功!\");\n          this.showDialog = false;\n        } else {\n          this.$message.error(res.message);\n        }\n      });\n      await this.getData();\n    },\n\n    //编辑\n    edit(item) {\n      this.addForm = JSON.parse(JSON.stringify(item)); //对象拷贝防止重置对象时污染\n      this.showDialog = true;\n    },\n  },\n  computed: {},\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.dashboard {\n  &-container {\n    margin: 30px;\n  }\n  &-text {\n    font-size: 30px;\n    line-height: 46px;\n  }\n}\n>>> .avatar-uploader .el-upload {\n  border: 1px dashed #d9d9d9;\n  border-radius: 6px;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n}\n.avatar-uploader .el-upload:hover {\n  border-color: #409eff;\n}\n.avatar-uploader-icon {\n  border: 1px #c7c7c7 dashed;\n  border-radius: 10px;\n  font-size: 28px;\n  color: #8c939d;\n  width: 178px;\n  height: 178px;\n  line-height: 178px;\n  text-align: center;\n}\n.avatar {\n  width: 178px;\n  height: 178px;\n  display: block;\n}\n</style>\n"]}]}