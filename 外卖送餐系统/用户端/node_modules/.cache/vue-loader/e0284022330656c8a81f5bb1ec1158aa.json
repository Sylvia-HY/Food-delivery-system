{"remainingRequest":"E:\\项目\\2022\\082601-外卖送餐\\用户端\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\项目\\2022\\082601-外卖送餐\\用户端\\src\\views\\shoppingCart\\index.vue?vue&type=style&index=0&id=90fc9a76&scoped=true&lang=less&","dependencies":[{"path":"E:\\项目\\2022\\082601-外卖送餐\\用户端\\src\\views\\shoppingCart\\index.vue","mtime":1661932653010},{"path":"E:\\项目\\2022\\082601-外卖送餐\\用户端\\node_modules\\css-loader\\dist\\cjs.js","mtime":1641885191395},{"path":"E:\\项目\\2022\\082601-外卖送餐\\用户端\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1642038070263},{"path":"E:\\项目\\2022\\082601-外卖送餐\\用户端\\node_modules\\postcss-loader\\src\\index.js","mtime":1641885191858},{"path":"E:\\项目\\2022\\082601-外卖送餐\\用户端\\node_modules\\less-loader\\dist\\cjs.js","mtime":1642554504188},{"path":"E:\\项目\\2022\\082601-外卖送餐\\用户端\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1641885170445},{"path":"E:\\项目\\2022\\082601-外卖送餐\\用户端\\node_modules\\vue-loader\\lib\\index.js","mtime":1642038070263}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLnNob3BwaW5nLWNvbnRhaW5lciB7CiAgcGFkZGluZy1ib3R0b206IDk1cHg7Cn0KLmNvbW1vZGl0eS1oZWFkIC9kZWVwLyAudmFuLW5hdi1iYXJfX2NvbnRlbnQgewogIGJhY2tncm91bmQtY29sb3I6IHJnYigxMDIsIDE2MSwgMTM2KTsKICBoZWlnaHQ6IDcwcHg7CiAgbGluZS1oZWlnaHQ6IDUwcHg7Cn0KLmNvbW1vZGl0eS1oZWFkIC9kZWVwLyAudmFuLW5hdi1iYXJfX3RpdGxlIHsKICBmb250LXNpemU6IDIwcHg7CiAgZm9udC13ZWlnaHQ6IDYwMDsKfQouY29tbW9kaXR5LWhlYWQgL2RlZXAvIC52YW4taWNvbi1hcnJvdy1sZWZ0OjpiZWZvcmUgewogIGZvbnQtc2l6ZTogMjBweDsKICBmb250LXdlaWdodDogNjAwOwogIC8vICAgbWFyZ2luLXRvcDogLTE2MHB4OwogIGNvbG9yOiAjMDAwOwp9Ci5ncmFkdWFsLWNoYW5nZSB7CiAgd2lkdGg6IDEwMCU7CiAgaGVpZ2h0OiAzMDBweDsKICBiYWNrZ3JvdW5kLWltYWdlOiBsaW5lYXItZ3JhZGllbnQoCiAgICByZ2IoMTAyLCAxNjEsIDEzNiksCiAgICByZ2IoMTAyLCAxNjEsIDEzNiksCiAgICAjYjhkOWM2LAogICAgI2I4ZDljNiwKICAgICNmZmYKICApOwogIG1hcmdpbi10b3A6IC0xcHg7Cn0KLmhvbWUtc2VhcmNoIHsKICBwYWRkaW5nOiA4cHggMjFweCA1cHggMjhweDsKfQouaG9tZS1zZWFyY2ggL2RlZXAvIC52YW4tc2VhcmNoIHsKICB3aWR0aDogMzIwcHg7Cn0KLmhvbWUtc2VhcmNoIC9kZWVwLyAudmFuLXNlYXJjaF9fY29udGVudCB7CiAgd2lkdGg6IDMyMHB4OwogIGhlaWdodDogNDBweDsKICBsaW5lLWhlaWdodDogNTBweDsKICBwYWRkaW5nLXRvcDogOHB4OwogIHBhZGRpbmctbGVmdDogMTVweDsKICBib3JkZXItcmFkaXVzOiAxMnB4OwogIGJveC1zaGFkb3c6IDAgMCA1cHggMnB4IHJnYigyMTYsIDIxNiwgMjE2KTsKICBiYWNrZ3JvdW5kOiAjZmZmOwp9Ci5ob21lLXNlYXJjaCAvZGVlcC8gLmljb24tc2VhcmNoOmJlZm9yZSB7CiAgZm9udC1zaXplOiAyMHB4OwogIGZvbnQtd2VpZ2h0OiA3MDA7CiAgY29sb3I6IHJnYigxMDIsIDE2MSwgMTM2KTsKfQouaG9tZS1zZWFyY2ggL2RlZXAvIC52YW4tZmllbGRfX2NvbnRyb2wgewogIHBhZGRpbmctbGVmdDogMTVweDsKICBmb250LXNpemU6IDE2cHg7Cn0KLmhvbWUtc2VhcmNoIC9kZWVwLyAudmFuLWZpZWxkX19jbGVhciB7CiAgZm9udC1zaXplOiAyMHB4OwogIC8vIGZvbnQtd2VpZ2h0OiA2MDA7CiAgY29sb3I6IHJnYigxMDIsIDE2MSwgMTM2KTsKfQouc2hvcHBpbmctY2FydCB7CiAgLy8gcG9zaXRpb246IGFic29sdXRlOwogIC8vIHRvcDogODBweDsKICAvLyBsZWZ0OiAxN3B4OwogIHdpZHRoOiAzNDBweDsKICAvLyBoZWlnaHQ6IDUwMHB4OwogIGJhY2tncm91bmQtY29sb3I6ICNmZmY7CiAgYm9yZGVyLXJhZGl1czogMTVweDsKICBib3gtc2hhZG93OiAwIDFweCA1cHggMnB4IHJnYigyMTYsIDIxNiwgMjE2KTsKICBtYXJnaW46IDhweCAwIDAgMTdweDsKfQouc2hvcHBpbmdjYXJ0LWhlYWQgewogIGhlaWdodDogNzBweDsKICBsaW5lLWhlaWdodDogNzBweDsKfQouc2hvcC1uYW1lIHsKICBmb250LXNpemU6IDIwcHg7CiAgZm9udC13ZWlnaHQ6IDYwMDsKICBwYWRkaW5nOiAwcHggMTVweDsKICBmbG9hdDogbGVmdDsKfQouaWNvbi1hcnJvdy1yaWdodCB7CiAgZmxvYXQ6IGxlZnQ7CiAgZm9udC1zaXplOiAyMHB4OwogIGZvbnQtd2VpZ2h0OiA2MDA7CiAgY29sb3I6IHJnYigxMDIsIDE2MSwgMTM2KTsKfQouc2hvcHBpbmdjYXJ0LWJvZHkgewogIC8vIGhlaWdodDogMTAwcHg7CiAgcGFkZGluZy1sZWZ0OiAxMHB4OwogIC8vIGJhY2tncm91bmQtY29sb3I6IGdyZWVuOwp9Ci5vcmRlci1saXN0IHsKICBkaXNwbGF5OiBmbGV4OwogIHdpZHRoOiAzMjBweDsKICBoZWlnaHQ6IDgwcHg7CiAgLy8gYmFja2dyb3VuZC1jb2xvcjogcGluazsKICBwYWRkaW5nLWJvdHRvbTogMnB4Owp9Ci5vcmRlci1saXN0ID4gaW1nIHsKICB3aWR0aDogNzZweDsKICBoZWlnaHQ6IDc2cHg7CiAgYm9yZGVyLXJhZGl1czogNXB4OwogIG1hcmdpbjogMnB4Owp9Ci5vcmRlci1yaWdodCB7CiAgbWFyZ2luLWxlZnQ6IDBweDsKICBwYWRkaW5nLWxlZnQ6IDE1cHg7CiAgbWFyZ2luLXRvcDogNXB4Owp9Ci5vcmRlci1uYW1lIHsKICB3aWR0aDogMTUwcHg7CiAgZm9udC1zaXplOiAxOHB4OwogIGZvbnQtd2VpZ2h0OiA2MDA7CiAgZmxvYXQ6IGxlZnQ7CiAgLy8gbWFyZ2luLXJpZ2h0OiA0MHB4Owp9Ci5vcmRlci1wcmljZSB7CiAgZmxvYXQ6IGxlZnQ7CiAgZm9udC1zaXplOiAyMHB4OwogIGZvbnQtd2VpZ2h0OiA2MDA7Cn0KLm9yZGVyLXNoYXJlIHsKICBwYWRkaW5nLXRvcDogNDVweDsKfQoub3JkZXItc3VtLXByaWNlIHsKICB0ZXh0LWFsaWduOiByaWdodDsKICBwYWRkaW5nLXRvcDogMTVweDsKICBwYWRkaW5nLXJpZ2h0OiAyMHB4Owp9Ci5vcmRlci1wIHsKICBtYXJnaW4tbGVmdDogMTkwcHg7CiAgLy8gZmxvYXQ6IGxlZnQ7CiAgZm9udC1zaXplOiAxNXB4OwogIG1hcmdpbi1yaWdodDogMTBweDsKfQoub3JkZXItc3BhbiB7CiAgZm9udC1zaXplOiAxM3B4OwogIGZvbnQtd2VpZ2h0OiA2MDA7Cn0KLm9yZGVyLXRvdGFsIHsKICAvLyBmbG9hdDogbGVmdDsKICBmb250LXNpemU6IDIycHg7CiAgZm9udC13ZWlnaHQ6IDYwMDsKfQouYnV0dG9uIHsKICB0ZXh0LWFsaWduOiByaWdodDsKfQouYnV0dG9uMSB7CiAgYm9yZGVyLXJhZGl1czogNXB4ICFpbXBvcnRhbnQ7CiAgbWFyZ2luOiAxMnB4IDE1cHg7Cn0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/shoppingCart","sourcesContent":["<template>\n  <div class=\"shopping-container\">\n    <div class=\"commodity-head\">\n      <van-nav-bar left-arrow @click-left=\"$router.back()\" title=\"订单\" />\n    </div>\n    <van-sticky>\n      <van-tabs v-model=\"active\" color=\"rgb(102, 161, 136)\" @change=\"getData\">\n        <van-tab title=\"全部\" name=\"\"></van-tab>\n        <van-tab title=\"待付款\" name=\"待付款\"></van-tab>\n        <van-tab title=\"待核销\" name=\"待核销\"></van-tab>\n        <van-tab title=\"待反馈\" name=\"已核销\"></van-tab>\n        <van-tab title=\"已完成\" name=\"已完成\"></van-tab>\n      </van-tabs>\n    </van-sticky>\n    <div class=\"home-search\">\n      <van-search v-model=\"value\" placeholder=\"请输入订单号搜索订单\" icon-prefix=\"iconfont\" left-icon=\"iconfont icon-search\" @input=\"getData\" />\n    </div>\n    <!-- <div class=\"gradual-change\"></div> -->\n    <div class=\"shoppingcart-list\">\n      <ul>\n        <li class=\"shopping-cart\" v-for=\"(shoppingcart, sindex) in shoppingcartList\" :key=\"sindex\">\n          <div class=\"shoppingcart-head\" @click=\"$router.push('/commodity?id=' + shoppingcart.sid)\">\n            <p class=\"shop-name\">{{ shoppingcart.sname }}</p>\n            <p class=\"iconfont icon-arrow-right\"></p>\n          </div>\n          <p style=\"padding: 0 15px 15px 15px; color: rgb(102, 161, 136)\" class=\"f-r f-a-c f-j-s\">\n            <span>订单号: {{ shoppingcart.code }}</span>\n            <span class=\"font13\">{{ shoppingcart.type }}</span>\n          </p>\n          <div class=\"shoppingcart-body\">\n            <ul>\n              <li class=\"order-list\" v-for=\"(order, oindex) in shoppingcart.goods\" :key=\"oindex\">\n                <img :src=\"order.img\" alt=\"\" />\n                <div class=\"order-right\">\n                  <p class=\"order-name font-hidden\" style=\"width: 130px\">{{ order.name }}</p>\n                  <p class=\"order-price\">￥{{ order.price }}</p>\n                  <p class=\"order-share\">× {{ order.num }}</p>\n                </div>\n              </li>\n            </ul>\n            <div class=\"order-sum-price mb20\" v-if=\"shoppingcart.status=='待核销'\">\n              <span class=\"pt10 pb10 font18 font-default f-r f-a-c f-j-s\">\n                <span>核销码:{{ shoppingcart.paycode }}</span>\n                <van-button type=\"primary\" size=\"small\" color=\"rgb(102, 161, 136)\" v-show=\"shoppingcart.status == '待核销'\" @click=\"$router.push(`/location?code=${shoppingcart.code}`)\">骑手位置</van-button>\n              </span>\n            </div>\n            <div class=\" order-sum-price\">\n              <span class=\"order-p\">小计</span>\n              <span class=\"order-span\">￥</span>\n              <span class=\"order-total\">{{ sumPrice(shoppingcart.goods) }}</span>\n            </div>\n          </div>\n          <div class=\"button\">\n            <van-button class=\"button1\" type=\"primary\" size=\"small\" color=\"rgb(102, 161, 136)\" v-show=\"shoppingcart.status == '待付款'\" @click=\"pay(shoppingcart)\">立即支付</van-button>\n            <van-button class=\"button1\" type=\"primary\" size=\"small\" color=\"rgb(102, 161, 136)\" v-show=\"shoppingcart.status == '已核销'\" @click=\"\n                code = shoppingcart.code;\n                show = true;\n              \">反馈</van-button>\n            <van-button class=\"button1\" type=\"primary\" size=\"small\" color=\"rgb(102, 161, 136)\" v-show=\"shoppingcart.status == '待核销' && shoppingcart.type == '外卖配送'\" @click=\"verification(shoppingcart)\">核销</van-button>\n            <div v-show=\"shoppingcart.status == '待核销' && shoppingcart.type == '店内就餐'\" style=\"color:rgb(102, 161, 136)\" class=\"pt10 pr20 pb10\">待核销</div>\n            <div v-show=\"shoppingcart.storereply\" class=\"font-default pr20 pl20 pt10\">商家回复:{{shoppingcart.storereply}}</div>\n            <div v-show=\"shoppingcart.status == '已完成'\" class=\"font-default p20\">已完成</div>\n          </div>\n        </li>\n      </ul>\n    </div>\n\n    <!-- 反馈 -->\n    <van-dialog v-model=\"show\" title=\"反馈\" show-cancel-button confirmButtonColor=\"rgb(102, 161, 136)\" @close=\"replycontent = ''\" @confirm=\"reply\">\n      <van-field v-model=\"replycontent\" rows=\"4\" autosize label=\"\" type=\"textarea\" placeholder=\"请输入反馈\" />\n    </van-dialog>\n  </div>\n</template>\n\n<script>\nimport * as api from \"@/api/api\";\nimport calculate from \"@/utils/calculate\";\n\nexport default {\n  name: \"ShoppingIndex\",\n  data() {\n    return {\n      value: \"\",\n      show: false,\n      active: \"\",\n      replycontent: \"\",\n      code: \"\",\n      shoppingcartList: [],\n    };\n  },\n  created() {\n    if (!sessionStorage.getItem(\"id\")) {\n      this.$toast(\"请先登录\");\n      this.$router.push(\"/my\");\n      return;\n    }\n    this.getData();\n  },\n  methods: {\n    getData() {\n      api\n        .orderslist({\n          limit: 999,\n          offset: 1,\n          code: this.value,\n          status: this.active,\n          uid: sessionStorage.getItem(\"id\"),\n        })\n        .then((res) => {\n          let list = [];\n          if (res.data.total > 0) {\n            let arr = {};\n            res.data.list.forEach((i) => {\n              if (!arr[i.code]) {\n                arr[i.code] = {\n                  id: i.id,\n                  code: i.code,\n                  sname: i.sname,\n                  simg: i.simg,\n                  sid: i.sid,\n                  time: i.time,\n                  goods: [i],\n                  status: i.status,\n                  type: i.type,\n                  paycode: i.paycode,\n                  storereply: i.storereply,\n                };\n              } else {\n                arr[i.code].goods.push(i);\n              }\n            });\n            Object.values(arr).forEach((i) => {\n              list.push(i);\n            });\n\n            let sortArr = list.sort((a, b) => {\n              return b.id - a.id;\n            });\n            list = sortArr;\n          }\n          this.shoppingcartList = list;\n        });\n    },\n\n    // 支付\n    pay(item) {\n      api\n        .changestatus({\n          code: item.code,\n          status: \"待核销\",\n        })\n        .then((res) => {\n          if (res.code == 200) {\n            this.$toast(\"支付成功!\");\n            this.getData();\n          }\n        });\n    },\n\n    // 反馈\n    reply() {\n      if (this.replycontent == \"\") {\n        this.$toast(\"反馈为空!\");\n        return;\n      }\n      api\n        .changestatus({\n          code: this.code,\n          reply: this.replycontent,\n          status: \"已完成\",\n        })\n        .then((res) => {\n          if (res.code == 200) {\n            this.$toast(\"反馈成功!\");\n            this.getData();\n          }\n        });\n    },\n\n    // 核销\n    verification(item) {\n      api\n        .changestatus({\n          code: item.code,\n          status: \"已核销\",\n        })\n        .then((res) => {\n          if (res.code == 200) {\n            this.$toast(\"核销成功!\");\n            this.getData();\n          }\n        });\n    },\n  },\n  computed: {\n    sumPrice() {\n      return (rows) => {\n        let total = 0;\n        rows.forEach((i) => {\n          total += Number(calculate.cheng(Number(i.num), Number(i.price)));\n        });\n        return this.$tool.round(total, 2);\n      };\n    },\n  },\n  watch: {},\n};\n</script>\n\n<style scoped lang=\"less\">\n.shopping-container {\n  padding-bottom: 95px;\n}\n.commodity-head /deep/ .van-nav-bar__content {\n  background-color: rgb(102, 161, 136);\n  height: 70px;\n  line-height: 50px;\n}\n.commodity-head /deep/ .van-nav-bar__title {\n  font-size: 20px;\n  font-weight: 600;\n}\n.commodity-head /deep/ .van-icon-arrow-left::before {\n  font-size: 20px;\n  font-weight: 600;\n  //   margin-top: -160px;\n  color: #000;\n}\n.gradual-change {\n  width: 100%;\n  height: 300px;\n  background-image: linear-gradient(\n    rgb(102, 161, 136),\n    rgb(102, 161, 136),\n    #b8d9c6,\n    #b8d9c6,\n    #fff\n  );\n  margin-top: -1px;\n}\n.home-search {\n  padding: 8px 21px 5px 28px;\n}\n.home-search /deep/ .van-search {\n  width: 320px;\n}\n.home-search /deep/ .van-search__content {\n  width: 320px;\n  height: 40px;\n  line-height: 50px;\n  padding-top: 8px;\n  padding-left: 15px;\n  border-radius: 12px;\n  box-shadow: 0 0 5px 2px rgb(216, 216, 216);\n  background: #fff;\n}\n.home-search /deep/ .icon-search:before {\n  font-size: 20px;\n  font-weight: 700;\n  color: rgb(102, 161, 136);\n}\n.home-search /deep/ .van-field__control {\n  padding-left: 15px;\n  font-size: 16px;\n}\n.home-search /deep/ .van-field__clear {\n  font-size: 20px;\n  // font-weight: 600;\n  color: rgb(102, 161, 136);\n}\n.shopping-cart {\n  // position: absolute;\n  // top: 80px;\n  // left: 17px;\n  width: 340px;\n  // height: 500px;\n  background-color: #fff;\n  border-radius: 15px;\n  box-shadow: 0 1px 5px 2px rgb(216, 216, 216);\n  margin: 8px 0 0 17px;\n}\n.shoppingcart-head {\n  height: 70px;\n  line-height: 70px;\n}\n.shop-name {\n  font-size: 20px;\n  font-weight: 600;\n  padding: 0px 15px;\n  float: left;\n}\n.icon-arrow-right {\n  float: left;\n  font-size: 20px;\n  font-weight: 600;\n  color: rgb(102, 161, 136);\n}\n.shoppingcart-body {\n  // height: 100px;\n  padding-left: 10px;\n  // background-color: green;\n}\n.order-list {\n  display: flex;\n  width: 320px;\n  height: 80px;\n  // background-color: pink;\n  padding-bottom: 2px;\n}\n.order-list > img {\n  width: 76px;\n  height: 76px;\n  border-radius: 5px;\n  margin: 2px;\n}\n.order-right {\n  margin-left: 0px;\n  padding-left: 15px;\n  margin-top: 5px;\n}\n.order-name {\n  width: 150px;\n  font-size: 18px;\n  font-weight: 600;\n  float: left;\n  // margin-right: 40px;\n}\n.order-price {\n  float: left;\n  font-size: 20px;\n  font-weight: 600;\n}\n.order-share {\n  padding-top: 45px;\n}\n.order-sum-price {\n  text-align: right;\n  padding-top: 15px;\n  padding-right: 20px;\n}\n.order-p {\n  margin-left: 190px;\n  // float: left;\n  font-size: 15px;\n  margin-right: 10px;\n}\n.order-span {\n  font-size: 13px;\n  font-weight: 600;\n}\n.order-total {\n  // float: left;\n  font-size: 22px;\n  font-weight: 600;\n}\n.button {\n  text-align: right;\n}\n.button1 {\n  border-radius: 5px !important;\n  margin: 12px 15px;\n}\n</style>\n"]}]}