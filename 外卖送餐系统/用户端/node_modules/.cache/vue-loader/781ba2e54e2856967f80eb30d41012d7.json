{"remainingRequest":"C:\\Users\\lenovo\\Desktop\\082601-外卖送餐\\用户端\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\lenovo\\Desktop\\082601-外卖送餐\\用户端\\src\\views\\my\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\lenovo\\Desktop\\082601-外卖送餐\\用户端\\src\\views\\my\\index.vue","mtime":1661927902110},{"path":"C:\\Users\\lenovo\\Desktop\\082601-外卖送餐\\用户端\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1641885170445},{"path":"C:\\Users\\lenovo\\Desktop\\082601-外卖送餐\\用户端\\node_modules\\babel-loader\\lib\\index.js","mtime":1641885170443},{"path":"C:\\Users\\lenovo\\Desktop\\082601-外卖送餐\\用户端\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1641885170445},{"path":"C:\\Users\\lenovo\\Desktop\\082601-外卖送餐\\用户端\\node_modules\\vue-loader\\lib\\index.js","mtime":1642038070263}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBTd2lwZXIgZnJvbSAic3dpcGVyIjsKaW1wb3J0IHZ1ZVNlYW1sZXNzU2Nyb2xsIGZyb20gInZ1ZS1zZWFtbGVzcy1zY3JvbGwiOwppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwppbXBvcnQgKiBhcyBhcGkgZnJvbSAiQC9hcGkvYXBpIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiTXlJbmRleCIsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHVzZXJuYW1lOiAiIiwKICAgICAgaW1nOiAiIiwKICAgICAgc2hvcHBpbmdjYXJ0TGlzdDogW10sCiAgICAgIHVzZXI6IGZhbHNlLAogICAgfTsKICB9LAogIGNvbXBvbmVudHM6IHsKICAgIHZ1ZVNlYW1sZXNzU2Nyb2xsLAogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGNsYXNzT3B0aW9uKCkgewogICAgICByZXR1cm4gewogICAgICAgIHN0ZXA6IDAuMiwKICAgICAgICBkaXJlY3Rpb246IDEsCiAgICAgICAgaG92ZXJTdG9wOiB0cnVlLAogICAgICAgIC8vIGxpbWl0TW92ZU51bTogJ3RoaXMuZm9vZExpc3QubGVuZ3RoLzInLAogICAgICAgIC8vIG9wZW5Ub3VjaDogZmFsc2UsCiAgICAgICAgLy8gd2FpdFRpbWU6IDUwLAogICAgICAgIC8vIHNpbmdsZVdpZHRoOiAzMAogICAgICB9OwogICAgfSwKICB9LAogIHdhdGNoOiB7fSwKICBjcmVhdGVkKCkgewogICAgaWYgKHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oImlkIikpIHsKICAgICAgdGhpcy51c2VyID0gdHJ1ZTsKICAgICAgdGhpcy51c2VybmFtZSA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oIm5hbWUiKTsKICAgICAgdGhpcy5pbWcgPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJpbWciKTsKICAgICAgdGhpcy5nZXREYXRhKCk7CiAgICB9CiAgfSwKCiAgbW91bnRlZCgpIHsKICAgIG5ldyBTd2lwZXIoIi5zd2lwZXItY29udGFpbmVyIiwgewogICAgICBzbGlkZXNQZXJWaWV3OiAyLAogICAgfSk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBnZXREYXRhKCkgewogICAgICBhcGkKICAgICAgICAub3JkZXJzbGlzdCh7CiAgICAgICAgICBsaW1pdDogOTk5LAogICAgICAgICAgb2Zmc2V0OiAxLAogICAgICAgICAgc3RhdHVzOiAi5bey5a6M5oiQIiwKICAgICAgICAgIHVpZDogc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgiaWQiKSwKICAgICAgICB9KQogICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgIGxldCBsaXN0ID0gW107CiAgICAgICAgICBpZiAocmVzLmRhdGEudG90YWwgPiAwKSB7CiAgICAgICAgICAgIGxldCBhcnIgPSB7fTsKICAgICAgICAgICAgcmVzLmRhdGEubGlzdC5mb3JFYWNoKChpKSA9PiB7CiAgICAgICAgICAgICAgaWYgKCFhcnJbaS5jb2RlXSkgewogICAgICAgICAgICAgICAgYXJyW2kuY29kZV0gPSB7CiAgICAgICAgICAgICAgICAgIGlkOiBpLmlkLAogICAgICAgICAgICAgICAgICBjb2RlOiBpLmNvZGUsCiAgICAgICAgICAgICAgICAgIHNuYW1lOiBpLnNuYW1lLAogICAgICAgICAgICAgICAgICBzaW1nOiBpLnNpbWcsCiAgICAgICAgICAgICAgICAgIHNpZDogaS5zaWQsCiAgICAgICAgICAgICAgICAgIHRpbWU6IGkudGltZSwKICAgICAgICAgICAgICAgICAgZ29vZHM6IFtpXSwKICAgICAgICAgICAgICAgICAgc3RhdHVzOiBpLnN0YXR1cywKICAgICAgICAgICAgICAgICAgdHlwZTogaS50eXBlLAogICAgICAgICAgICAgICAgICBwYXljb2RlOiBpLnBheWNvZGUsCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBhcnJbaS5jb2RlXS5nb29kcy5wdXNoKGkpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIE9iamVjdC52YWx1ZXMoYXJyKS5mb3JFYWNoKChpKSA9PiB7CiAgICAgICAgICAgICAgbGlzdC5wdXNoKGkpOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGxldCBzb3J0QXJyID0gbGlzdC5zb3J0KChhLCBiKSA9PiB7CiAgICAgICAgICAgICAgcmV0dXJuIGIuaWQgLSBhLmlkOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgbGlzdCA9IHNvcnRBcnI7CiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLnNob3BwaW5nY2FydExpc3QgPSBsaXN0OwogICAgICAgIH0pOwogICAgfSwKCiAgICBPbmVkaXQoKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvdXNlciIpOwogICAgfSwKICAgIE9ubG9naW4oKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvbG9naW4iKTsKICAgICAgdGhpcy51c2VyID0gZmFsc2U7CiAgICB9LAogICAgc2lnbm91dCgpIHsKICAgICAgc2Vzc2lvblN0b3JhZ2UuY2xlYXIoKTsKICAgICAgdGhpcy51c2VyID0gZmFsc2U7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuDA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/my","sourcesContent":["<template>\n  <div class=\"my-container\">\n    <!-- 登录状态 -->\n    <div class=\"user-info\" v-if=\"user\">\n      <van-image round fit=\"cover\" width=\"100px\" height=\"100px\" :src=\"img || require('@/assets/signIn.png')\" style=\"margin-top: 7px; position: absolute; top: 20px; left: 20px\" />\n      <div class=\"edit\" @click=\"Onedit\">\n        <p class=\"editp\">修改</p>\n        <i class=\"iconfont icon-edit\"></i>\n      </div>\n      <div class=\"username\">\n        <p>{{ username }}</p>\n      </div>\n    </div>\n    <!-- 未登录状态 -->\n    <div class=\"user-info\" v-if=\"!user\" @click=\"Onlogin\">\n      <van-image round fit=\"cover\" width=\"150px\" height=\"150px\" :src=\"require('@/assets/signIn.png')\" style=\"margin-top: 7px\" />\n      <div class=\"username\">\n        <p>点击登录</p>\n      </div>\n    </div>\n\n    <div class=\"history\" v-if=\"user\">\n      <div class=\"history_nav\">\n        <p class=\"history_navFirst\">我的订单</p>\n        <p class=\"iconfont icon-time\"></p>\n        <!-- <p class=\"history_navLast \" >\n            <i class=\"iconfont icon-arrow-right-bold\"></i>\n          </p> -->\n      </div>\n      <div class=\"swiper-container\" ref=\"swiperRef\" v-if=\"user\">\n        <ul class=\"swiper-wrapper\" :style=\"'width:' + 'calc(' + Math.ceil(shoppingcartList.length) + ' * 200px' + ')'\">\n          <li class=\"history_order swiper-slide\" v-for=\"order in shoppingcartList\" :key=\"order.id\">\n            <img :src=\"order.simg\" />\n            <p>{{ order.sname }}</p>\n            <vue-seamless-scroll :data=\"order.goods\" class=\"seamless-warp\" :class-option=\"classOption\">\n              <ul class=\"food\">\n                <li class=\"order_food\" v-for=\"food in order.goods\" :key=\"food.id\">\n                  <img :src=\"food.img\" />\n                  <p>{{ food.name }}</p>\n                </li>\n              </ul>\n            </vue-seamless-scroll>\n          </li>\n        </ul>\n      </div>\n    </div>\n\n    <div class=\"sign-out\" v-if=\"user\" @click=\"signout\">\n      <p>退出登录</p>\n      <p class=\"iconfont icon-tuichudenglu\"></p>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Swiper from \"swiper\";\nimport vueSeamlessScroll from \"vue-seamless-scroll\";\nimport axios from \"axios\";\nimport * as api from \"@/api/api\";\n\nexport default {\n  name: \"MyIndex\",\n  data() {\n    return {\n      username: \"\",\n      img: \"\",\n      shoppingcartList: [],\n      user: false,\n    };\n  },\n  components: {\n    vueSeamlessScroll,\n  },\n  computed: {\n    classOption() {\n      return {\n        step: 0.2,\n        direction: 1,\n        hoverStop: true,\n        // limitMoveNum: 'this.foodList.length/2',\n        // openTouch: false,\n        // waitTime: 50,\n        // singleWidth: 30\n      };\n    },\n  },\n  watch: {},\n  created() {\n    if (sessionStorage.getItem(\"id\")) {\n      this.user = true;\n      this.username = sessionStorage.getItem(\"name\");\n      this.img = sessionStorage.getItem(\"img\");\n      this.getData();\n    }\n  },\n\n  mounted() {\n    new Swiper(\".swiper-container\", {\n      slidesPerView: 2,\n    });\n  },\n  methods: {\n    getData() {\n      api\n        .orderslist({\n          limit: 999,\n          offset: 1,\n          status: \"已完成\",\n          uid: sessionStorage.getItem(\"id\"),\n        })\n        .then((res) => {\n          let list = [];\n          if (res.data.total > 0) {\n            let arr = {};\n            res.data.list.forEach((i) => {\n              if (!arr[i.code]) {\n                arr[i.code] = {\n                  id: i.id,\n                  code: i.code,\n                  sname: i.sname,\n                  simg: i.simg,\n                  sid: i.sid,\n                  time: i.time,\n                  goods: [i],\n                  status: i.status,\n                  type: i.type,\n                  paycode: i.paycode,\n                };\n              } else {\n                arr[i.code].goods.push(i);\n              }\n            });\n            Object.values(arr).forEach((i) => {\n              list.push(i);\n            });\n\n            let sortArr = list.sort((a, b) => {\n              return b.id - a.id;\n            });\n            list = sortArr;\n          }\n          this.shoppingcartList = list;\n        });\n    },\n\n    Onedit() {\n      this.$router.push(\"/user\");\n    },\n    Onlogin() {\n      this.$router.push(\"/login\");\n      this.user = false;\n    },\n    signout() {\n      sessionStorage.clear();\n      this.user = false;\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"less\">\n* {\n  margin: 0 auto;\n}\n.my-container {\n  width: 375px;\n  height: 650px;\n  overflow: hidden;\n}\n.user-info {\n  position: relative;\n  width: 330px;\n  height: 160px;\n  line-height: 160px;\n  margin-top: 30px;\n  // background: pink;\n  border-radius: 15px;\n  box-shadow: 0 0 5px 2px rgb(216, 216, 216);\n}\n.edit {\n  display: flex;\n  width: 60px;\n  height: 50px;\n  // background-color:pink;\n  // line-height: 30px;\n  position: absolute;\n  top: -35%;\n  right: 5%;\n}\n.icon-edit {\n  font-size: 20px;\n  font-weight: 600;\n}\n.username {\n  position: absolute;\n  top: -8%;\n  left: 43%;\n  font-size: 20px;\n  font-weight: 600;\n}\n.history {\n  width: 100%;\n  height: 250px;\n  // background-color: pink;\n}\n.history_nav {\n  height: 70px;\n  line-height: 70px;\n  padding: 0 30px;\n}\n.history_navFirst {\n  display: inline;\n  float: left;\n  font-size: 17px;\n  font-weight: 600;\n}\n.icon-time {\n  float: left;\n  font-size: 25px;\n  font-weight: 600;\n  margin-left: 10px;\n  // color: rgb(102, 161, 136);\n}\n.history_navLast {\n  position: relative;\n  width: 30px;\n  height: 29px;\n  border-radius: 12px;\n  box-shadow: 0 0 5px 2px rgb(216, 216, 216);\n  // display: inline;\n  float: right;\n  margin-top: 20px;\n}\n.icon-arrow-right-bold {\n  position: relative;\n  font-size: 16px;\n  font-weight: 600;\n  top: -20px;\n  left: 7px;\n  color: rgb(102, 161, 136);\n}\n.swiper-slide {\n  width: auto; /*根据内容调整宽度*/\n}\n.swiper-slide1 {\n  width: auto; /*根据内容调整宽度*/\n}\n.history_order {\n  width: 175px !important;\n  height: 220px;\n  // background: #000;\n  float: left;\n  margin: 0 6px;\n  border-radius: 25px;\n  box-shadow: 0 1px 5px 2px rgb(216, 216, 216);\n  overflow: hidden;\n}\n.history_order > img {\n  width: 175px;\n  height: 100px;\n  border-radius: 25px;\n  box-shadow: 0 1px 5px 2px rgb(216, 216, 216);\n}\n.history_order > p {\n  padding: 5px 0 3px 8px;\n  font-size: 15px;\n  font-weight: 600;\n}\n.seamless-warp {\n  width: 100%;\n  height: 70px;\n  overflow: hidden;\n}\n.order_food {\n  top: 0;\n  left: 0;\n  width: 70px;\n  height: 70px;\n  // background-color: purple;\n  float: left;\n  margin: 5px 5px;\n  margin-left: 10px;\n  border-radius: 8px;\n  text-align: center;\n  // overflow: hidden;\n}\n.order_food img {\n  width: 70px;\n  height: 50px;\n  border-radius: 8px;\n}\n.order_food p {\n  font-size: 10px;\n}\n.sign-out {\n  width: 300px;\n  height: 50px;\n  line-height: 50px;\n  border-radius: 10px;\n  box-shadow: 0 1px 5px 2px rgb(216, 216, 216);\n  margin-top: 60px;\n  padding: 0 25px;\n}\n.sign-out p {\n  float: left;\n}\n.sign-out > p:first-child {\n  font-weight: 600;\n}\n.icon-tuichudenglu {\n  font-size: 25px;\n  // font-weight: 600;\n  color: rgb(102, 161, 136);\n  margin-left: 15px;\n}\n</style>\n"]}]}