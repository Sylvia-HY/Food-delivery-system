{"remainingRequest":"E:\\项目\\2022\\082601-外卖送餐\\用户端\\node_modules\\babel-loader\\lib\\index.js!E:\\项目\\2022\\082601-外卖送餐\\用户端\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\项目\\2022\\082601-外卖送餐\\用户端\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\项目\\2022\\082601-外卖送餐\\用户端\\src\\views\\user\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\项目\\2022\\082601-外卖送餐\\用户端\\src\\views\\user\\index.vue","mtime":1634967165000},{"path":"E:\\项目\\2022\\082601-外卖送餐\\用户端\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1641885170445},{"path":"E:\\项目\\2022\\082601-外卖送餐\\用户端\\node_modules\\babel-loader\\lib\\index.js","mtime":1641885170443},{"path":"E:\\项目\\2022\\082601-外卖送餐\\用户端\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1641885170445},{"path":"E:\\项目\\2022\\082601-外卖送餐\\用户端\\node_modules\\vue-loader\\lib\\index.js","mtime":1642038070263}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiRTovXHU5ODc5XHU3NkVFLzIwMjIvMDgyNjAxLVx1NTkxNlx1NTM1Nlx1OTAwMVx1OTkxMC9cdTc1MjhcdTYyMzdcdTdBRUYvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IFVwZGF0ZU5hbWUgZnJvbSAiLi9jb21wb25ldHMvdXBkYXRlLW5hbWUudnVlIjsKaW1wb3J0IFVwZGF0ZVB3ZCBmcm9tICIuL2NvbXBvbmV0cy91cGRhdGUtcHdkLnZ1ZSI7CmltcG9ydCBVcGRhdGVHZW5kZXIgZnJvbSAiLi9jb21wb25ldHMvdXBkYXRlLWdlbmRlci52dWUiOwppbXBvcnQgVXBkYXRlQmlydGhkYXkgZnJvbSAiLi9jb21wb25ldHMvdXBkYXRlLWJpcnRoZGF5LnZ1ZSI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCAqIGFzIGFwaSBmcm9tICJAL2FwaS9hcGkiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlVzZXJQcm9maWxlIiwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdXNlcjogewogICAgICAgIGltZzogIiIsCiAgICAgICAgbmFtZTogIiIsCiAgICAgICAgc2V4OiAi55S3IiwKICAgICAgICBiaXJ0aGRheTogIiIsCiAgICAgICAgcHdkOiAiIgogICAgICB9LAogICAgICBpc0VkaXROYW1lU2hvdzogZmFsc2UsCiAgICAgIGlzRWRpdFB3ZFNob3c6IGZhbHNlLAogICAgICBpc0VkaXRHZW5kZXJTaG93OiBmYWxzZSwKICAgICAgaXNFZGl0QmlydGhkYXlTaG93OiBmYWxzZSwKICAgICAgdXJsOiBwcm9jZXNzLmVudi5WVUVfQVBQX0JBU0VfRklMRQogICAgfTsKICB9LAogIGNvbXBvbmVudHM6IHsKICAgIFVwZGF0ZU5hbWU6IFVwZGF0ZU5hbWUsCiAgICBVcGRhdGVQd2Q6IFVwZGF0ZVB3ZCwKICAgIFVwZGF0ZUdlbmRlcjogVXBkYXRlR2VuZGVyLAogICAgVXBkYXRlQmlydGhkYXk6IFVwZGF0ZUJpcnRoZGF5CiAgfSwKICBjb21wdXRlZDoge30sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMudXNlci5uYW1lID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgibmFtZSIpOwogICAgdGhpcy51c2VyLmltZyA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oImltZyIpOwogICAgdGhpcy51c2VyLnNleCA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oInNleCIpOwogICAgdGhpcy51c2VyLmJpcnRoZGF5ID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgiYmlydGhkYXkiKTsKICAgIHRoaXMudXNlci5wd2QgPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJwd2QiKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8v5LiK5Lyg5aS05YOPCiAgICBvbkZpbGVDaGFuZ2U6IGZ1bmN0aW9uIG9uRmlsZUNoYW5nZSgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBkYXRhID0gbmV3IEZvcm1EYXRhKCk7CiAgICAgIGRhdGEuYXBwZW5kKCJmaWxlIiwgdGhpcy4kcmVmcy5maWxlLmZpbGVzWzBdKTsKICAgICAgYXhpb3MucG9zdCh0aGlzLnVybCwgZGF0YSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgX3RoaXMudXNlci5pbWcgPSByZXMuZGF0YS5kYXRhOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDkv53lrZgKICAgIHNhdmU6IGZ1bmN0aW9uIHNhdmUoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgaWYgKHRoaXMudXNlci5uYW1lID09ICIiKSB7CiAgICAgICAgdGhpcy4kdG9hc3QoIuivt+i+k+WFpeaYteensCIpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKCEvXltBLVphLXowLTldezgsMTJ9JC8udGVzdCh0aGlzLnVzZXIucHdkKSkgewogICAgICAgIHRoaXMuJHRvYXN0KCLlr4bnoIHkuLo4fjEy5L2N5pWw5a2X5a2X5q+N57uE5ZCIIik7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBhcGkudXNlcnNhdmUoX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCB0aGlzLnVzZXIpLCB7fSwgewogICAgICAgIGlkOiBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJpZCIpCiAgICAgIH0pKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAocmVzLmNvZGUgPT0gMjAwKSB7CiAgICAgICAgICBfdGhpczIuJHRvYXN0KCLkv53lrZjmiJDlip8hIik7CgogICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgibmFtZSIsIF90aGlzMi51c2VyLm5hbWUpOwogICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgiaW1nIiwgX3RoaXMyLnVzZXIuaW1nKTsKICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oInNleCIsIF90aGlzMi51c2VyLnNleCk7CiAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCJiaXJ0aGRheSIsIF90aGlzMi51c2VyLmJpcnRoZGF5KTsKICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oInB3ZCIsIF90aGlzMi51c2VyLnB3ZCk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwEA,OAAA,UAAA,MAAA,6BAAA;AACA,OAAA,SAAA,MAAA,4BAAA;AACA,OAAA,YAAA,MAAA,+BAAA;AACA,OAAA,cAAA,MAAA,iCAAA;AACA,OAAA,KAAA,MAAA,OAAA;AACA,OAAA,KAAA,GAAA,MAAA,WAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,aADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,IAAA,EAAA;AACA,QAAA,GAAA,EAAA,EADA;AAEA,QAAA,IAAA,EAAA,EAFA;AAGA,QAAA,GAAA,EAAA,GAHA;AAIA,QAAA,QAAA,EAAA,EAJA;AAKA,QAAA,GAAA,EAAA;AALA,OADA;AAQA,MAAA,cAAA,EAAA,KARA;AASA,MAAA,aAAA,EAAA,KATA;AAUA,MAAA,gBAAA,EAAA,KAVA;AAWA,MAAA,kBAAA,EAAA,KAXA;AAYA,MAAA,GAAA,EAAA,OAAA,CAAA,GAAA,CAAA;AAZA,KAAA;AAcA,GAjBA;AAkBA,EAAA,UAAA,EAAA;AACA,IAAA,UAAA,EAAA,UADA;AAEA,IAAA,SAAA,EAAA,SAFA;AAGA,IAAA,YAAA,EAAA,YAHA;AAIA,IAAA,cAAA,EAAA;AAJA,GAlBA;AAwBA,EAAA,QAAA,EAAA,EAxBA;AAyBA,EAAA,OAzBA,qBAyBA;AACA,SAAA,IAAA,CAAA,IAAA,GAAA,cAAA,CAAA,OAAA,CAAA,MAAA,CAAA;AACA,SAAA,IAAA,CAAA,GAAA,GAAA,cAAA,CAAA,OAAA,CAAA,KAAA,CAAA;AACA,SAAA,IAAA,CAAA,GAAA,GAAA,cAAA,CAAA,OAAA,CAAA,KAAA,CAAA;AACA,SAAA,IAAA,CAAA,QAAA,GAAA,cAAA,CAAA,OAAA,CAAA,UAAA,CAAA;AACA,SAAA,IAAA,CAAA,GAAA,GAAA,cAAA,CAAA,OAAA,CAAA,KAAA,CAAA;AACA,GA/BA;AAgCA,EAAA,OAAA,EAAA;AACA;AACA,IAAA,YAFA,0BAEA;AAAA;;AACA,UAAA,IAAA,GAAA,IAAA,QAAA,EAAA;AACA,MAAA,IAAA,CAAA,MAAA,CAAA,MAAA,EAAA,KAAA,KAAA,CAAA,IAAA,CAAA,KAAA,CAAA,CAAA,CAAA;AAEA,MAAA,KAAA,CAAA,IAAA,CAAA,KAAA,GAAA,EAAA,IAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,QAAA,KAAA,CAAA,IAAA,CAAA,GAAA,GAAA,GAAA,CAAA,IAAA,CAAA,IAAA;AACA,OAFA;AAGA,KATA;AAWA;AACA,IAAA,IAZA,kBAYA;AAAA;;AACA,UAAA,KAAA,IAAA,CAAA,IAAA,IAAA,EAAA,EAAA;AACA,aAAA,MAAA,CAAA,OAAA;AACA;AACA;;AAEA,UAAA,CAAA,sBAAA,IAAA,CAAA,KAAA,IAAA,CAAA,GAAA,CAAA,EAAA;AACA,aAAA,MAAA,CAAA,gBAAA;AACA;AACA;;AAEA,MAAA,GAAA,CACA,QADA,iCAEA,KAAA,IAFA;AAGA,QAAA,EAAA,EAAA,cAAA,CAAA,OAAA,CAAA,IAAA;AAHA,UAKA,IALA,CAKA,UAAA,GAAA,EAAA;AACA,YAAA,GAAA,CAAA,IAAA,IAAA,GAAA,EAAA;AACA,UAAA,MAAA,CAAA,MAAA,CAAA,OAAA;;AACA,UAAA,cAAA,CAAA,OAAA,CAAA,MAAA,EAAA,MAAA,CAAA,IAAA,CAAA,IAAA;AACA,UAAA,cAAA,CAAA,OAAA,CAAA,KAAA,EAAA,MAAA,CAAA,IAAA,CAAA,GAAA;AACA,UAAA,cAAA,CAAA,OAAA,CAAA,KAAA,EAAA,MAAA,CAAA,IAAA,CAAA,GAAA;AACA,UAAA,cAAA,CAAA,OAAA,CAAA,UAAA,EAAA,MAAA,CAAA,IAAA,CAAA,QAAA;AACA,UAAA,cAAA,CAAA,OAAA,CAAA,KAAA,EAAA,MAAA,CAAA,IAAA,CAAA,GAAA;AACA;AACA,OAdA;AAeA;AAtCA;AAhCA,CAAA","sourcesContent":["<template>\n  <div class=\"user-profile\">\n    <div class=\"commodity-head\">\n      <van-nav-bar left-arrow @click-left=\"$router.back()\" title=\"个人信息\" />\n    </div>\n    <input type=\"file\" hidden ref=\"file\" accept=\"image/*\" @change=\"onFileChange\" />\n    <van-cell class=\"user-details\" title=\"头像\" is-link center @click=\"$refs.file.click()\">\n      <van-image round fit=\"cover\" width=\"45\" height=\"45\" :src=\"user.img\" style=\"margin-top: 25px\" />\n    </van-cell>\n    <van-cell class=\"user-details\" title=\"昵称\" is-link :value=\"user.name\" @click=\"isEditNameShow = true\"></van-cell>\n    <van-cell class=\"user-details\" title=\"密码\" is-link @click=\"isEditPwdShow = true\"></van-cell>\n    <van-cell class=\"user-details\" title=\"性别\" is-link :value=\"user.sex\" @click=\"isEditGenderShow = true\"></van-cell>\n    <van-cell class=\"user-details\" title=\"生日\" is-link :value=\"user.birthday\" @click=\"isEditBirthdayShow = true\"></van-cell>\n    <div class=\"f-r f-a-c f-j-c\">\n      <van-button style=\"width: 200px; margin-top: 200px\" round color=\"#66a188\" @click=\"save\">保存</van-button>\n    </div>\n    <!-- 修改昵称 -->\n    <van-popup v-model=\"isEditNameShow\" position=\"bottom\" :style=\"{ height: '100%' }\">\n      <update-name\n        @close=\"isEditNameShow = false\"\n        :name.async=\"user.name\"\n        @onConfirm=\"\n          (name) => {\n            user.name = name;\n          }\n        \"\n      ></update-name>\n    </van-popup>\n    <!-- 修改密码 -->\n    <van-popup v-model=\"isEditPwdShow\" position=\"bottom\" :style=\"{ height: '100%' }\">\n      <update-pwd\n        @close=\"isEditPwdShow = false\"\n        :pwd.async=\"user.pwd\"\n        @onConfirm=\"\n          (pwd) => {\n            user.pwd = pwd;\n          }\n        \"\n      ></update-pwd>\n    </van-popup>\n    <!-- 修改性别 -->\n    <van-popup v-model=\"isEditGenderShow\" position=\"bottom\">\n      <!-- <update-name @close=\"isEditGenderShow = false\" :name=\"user.name\"></update-name> -->\n      <update-gender\n        :sex=\"user.sex == '男' ? 0 : 1\"\n        @close=\"isEditGenderShow = false\"\n        @onConfirm=\"\n          (sex) => {\n            user.sex = sex;\n            isEditGenderShow = false;\n          }\n        \"\n      ></update-gender>\n    </van-popup>\n    <!-- 修改生日 -->\n    <van-popup v-model=\"isEditBirthdayShow\" position=\"bottom\">\n      <!-- <update-name @close=\"isEditGenderShow = false\" :name=\"user.name\"></update-name> -->\n      <update-birthday\n        v-model=\"user.birthday\"\n        @close=\"isEditBirthdayShow = false\"\n        @onConfirm=\"\n          (birthday) => {\n            user.birthday = birthday;\n            isEditBirthdayShow = false;\n          }\n        \"\n      ></update-birthday>\n    </van-popup>\n  </div>\n</template>\n\n<script>\nimport UpdateName from \"./componets/update-name.vue\";\nimport UpdatePwd from \"./componets/update-pwd.vue\";\nimport UpdateGender from \"./componets/update-gender.vue\";\nimport UpdateBirthday from \"./componets/update-birthday.vue\";\nimport axios from \"axios\";\nimport * as api from \"@/api/api\";\n\nexport default {\n  name: \"UserProfile\",\n  data() {\n    return {\n      user: {\n        img: \"\",\n        name: \"\",\n        sex: \"男\",\n        birthday: \"\",\n        pwd: \"\"\n      },\n      isEditNameShow: false,\n      isEditPwdShow: false,\n      isEditGenderShow: false,\n      isEditBirthdayShow: false,\n      url: process.env.VUE_APP_BASE_FILE\n    };\n  },\n  components: {\n    UpdateName,\n    UpdatePwd,\n    UpdateGender,\n    UpdateBirthday\n  },\n  computed: {},\n  created() {\n    this.user.name = sessionStorage.getItem(\"name\");\n    this.user.img = sessionStorage.getItem(\"img\");\n    this.user.sex = sessionStorage.getItem(\"sex\");\n    this.user.birthday = sessionStorage.getItem(\"birthday\");\n    this.user.pwd = sessionStorage.getItem(\"pwd\");\n  },\n  methods: {\n    //上传头像\n    onFileChange() {\n      let data = new FormData();\n      data.append(\"file\", this.$refs.file.files[0]);\n\n      axios.post(this.url, data).then((res) => {\n        this.user.img = res.data.data;\n      });\n    },\n\n    // 保存\n    save() {\n      if (this.user.name == \"\") {\n        this.$toast(\"请输入昵称\");\n        return;\n      }\n\n      if (!/^[A-Za-z0-9]{8,12}$/.test(this.user.pwd)) {\n        this.$toast(\"密码为8~12位数字字母组合\");\n        return;\n      }\n\n      api\n        .usersave({\n          ...this.user,\n          id: sessionStorage.getItem(\"id\")\n        })\n        .then((res) => {\n          if (res.code == 200) {\n            this.$toast(\"保存成功!\");\n            sessionStorage.setItem(\"name\", this.user.name);\n            sessionStorage.setItem(\"img\", this.user.img);\n            sessionStorage.setItem(\"sex\", this.user.sex);\n            sessionStorage.setItem(\"birthday\", this.user.birthday);\n            sessionStorage.setItem(\"pwd\", this.user.pwd);\n          }\n        });\n    }\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n* {\n  padding: 0;\n  margin: 0;\n}\n.commodity-head /deep/ .van-nav-bar__content {\n  background-color: rgb(102, 161, 136);\n  height: 60px;\n  line-height: 60px;\n}\n.commodity-head /deep/ .van-nav-bar__title {\n  font-size: 20px;\n  font-weight: 600;\n}\n.commodity-head /deep/ .van-icon-arrow-left::before {\n  font-size: 20px;\n  font-weight: 600;\n  //   margin-top: -160px;\n  color: #000;\n}\n.user-details {\n  height: 60px;\n  line-height: 60px;\n  padding: 0 20px;\n  font-size: 18px;\n  // font-weight: 600;\n}\n.user-details /deep/ .van-icon-arrow::before {\n  margin-top: 18px;\n  color: rgb(102, 161, 136);\n  font-weight: 600;\n  font-size: 20px;\n  padding-left: 5px;\n}\n.van-popup {\n  background-color: #f5f7f9;\n}\n</style>\n"],"sourceRoot":"src/views/user"}]}